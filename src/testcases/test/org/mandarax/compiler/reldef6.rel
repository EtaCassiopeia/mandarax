package test.org.mandarax.compiler.reldef6;
import test.org.mandarax.compiler.*;
object Discount goldDiscount = new Discount(20,true);
object Discount silverDiscount = new Discount(10,true);
object Discount specialDiscount = new Discount(5,false);
rel DiscountRel(Customer customer,Discount discount) queries getDiscount(customer),qualifiesForDiscount(customer,discount) {
	rule1: c.turnover>1000 -> DiscountRel(c,goldDiscount);
	rule2: FrequentCustomer(c) -> DiscountRel(c,goldDiscount);
	rule3: c.paymentMethod == "CompanyVisa" -> DiscountRel(c,silverDiscount);
}
rel FrequentCustomer(Customer customer) queries isFrequentCustomer(customer) {
	rule1: c.transactionCount>5 -> FrequentCustomer(c);
	rule2: c.transactionCount>3 & c.turnover>1000 -> FrequentCustomer(c);
}
